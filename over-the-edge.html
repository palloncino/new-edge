<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/font.css">
    <link rel="stylesheet" href="./assets/css/global.css">
    <link rel="stylesheet" href="./assets/css/header.css">
    <!-- Specific CSS for current page -->
    <link rel="stylesheet" href="./assets/css/over-the-edge/section-1-over-the-edge.css">
    <title>Over the edge</title>
</head>

<body class="page-id-42">

    <div class="outer-app-container">

        <!-- HEADER -->
        <div id="edge-header" class="edge-header">
            <div id="header-logo-container" class="header-logo-container">
                <img class="header-logo-img" src="./assets/svgs/logo.svg" alt="Edge"
                    onClick="window.location = './front-page.html';" style="cursor: pointer;" />
                <h1 class="header-logo-edge">edge</h1>
            </div>
            <div class="header-navigation-links-container">
                <div class="header-navigation-links">
                    <a class="header-navigation-link" href="/a-proposito-di-noi.html">A proposito di noi</a>
                    <a class="header-navigation-link" href="/cosa-facciamo.html">Cosa facciamo</a>
                    <a class="header-navigation-link" href="/over-the-edge.html">Over the Edge</a>
                    <a class="header-navigation-link" href="/il-gruppo.html">Il gruppo</a>
                    <a class="header-navigation-link" href="/contatti.html">Contatti</a>
                    <a class="header-navigation-link" href="#">it <span style="font-family: arial;">|</span> en</a>
                </div>
            </div>
        </div>

        <div class="inner-app-container">

            <div class="section-padded-content section-1-over-the-edge">
                <div class="section-padded-content-relative-container">


                    <div id="section-1-over-the-edge__link-1-shape" class="section-1-over-the-edge__link-shape"></div>
                    <div id="section-1-over-the-edge__link-1-plus" class="section-1-over-the-edge__link-plus plus-icon"
                        onclick="section1AboutUsSelectLink(1)"></div>
                    <div id="section-1-over-the-edge__link-1-title" class="section-1-over-the-edge__link-title"
                        data-meta-label="true">LINK 1</div>

                    <div id="section-1-over-the-edge__link-2-shape" class="section-1-over-the-edge__link-shape"></div>
                    <div id="section-1-over-the-edge__link-2-plus" class="section-1-over-the-edge__link-plus plus-icon"
                        onclick="section1AboutUsSelectLink(2)"></div>
                    <div id="section-1-over-the-edge__link-2-title" class="section-1-over-the-edge__link-title"
                        data-meta-label="true">LINK 2</div>

                    <div id="section-1-over-the-edge__link-3-shape" class="section-1-over-the-edge__link-shape"></div>
                    <div id="section-1-over-the-edge__link-3-plus" class="section-1-over-the-edge__link-plus plus-icon"
                        onclick="section1AboutUsSelectLink(3)"></div>
                    <div id="section-1-over-the-edge__link-3-title" class="section-1-over-the-edge__link-title"
                        data-meta-label="true">LINK 3</div>

                    <div id="section-1-over-the-edge__link-4-shape" class="section-1-over-the-edge__link-shape"></div>
                    <div id="section-1-over-the-edge__link-4-plus" class="section-1-over-the-edge__link-plus plus-icon"
                        onclick="section1AboutUsSelectLink(4)"></div>
                    <div id="section-1-over-the-edge__link-4-title" class="section-1-over-the-edge__link-title"
                        data-meta-label="true">LINK 4</div>

                    <div id="section-1-over-the-edge__link-5-shape" class="section-1-over-the-edge__link-shape"></div>
                    <div id="section-1-over-the-edge__link-5-plus" class="section-1-over-the-edge__link-plus plus-icon"
                        onclick="section1AboutUsSelectLink(5)"></div>
                    <div id="section-1-over-the-edge__link-5-title" class="section-1-over-the-edge__link-title"
                        data-meta-label="true">LINK 5</div>

                    <div id="section-1-over-the-edge__link-6-shape" class="section-1-over-the-edge__link-shape"></div>
                    <div id="section-1-over-the-edge__link-6-plus" class="section-1-over-the-edge__link-plus plus-icon"
                        onclick="section1AboutUsSelectLink(6)"></div>
                    <div id="section-1-over-the-edge__link-6-title" class="section-1-over-the-edge__link-title"
                        data-meta-label="true">LINK 6</div>


                    <div id="section-1-over-the-edge__back-btn" class="btn btn-F69701 color-FFF"
                        onclick="section1AboutUsUnselect()" data-meta-label="true">Back
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script src="./assets/js/over-the-edge/section-1-over-the-edge.js"></script>
    <script src="./assets/js/header/header-links.js"></script>
    <!-- Place this script before the closing </body> tag -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize positioning
            positionLinks();
    
            // Reposition links on window resize for responsiveness, debounced to improve performance
            window.addEventListener('resize', debounce(positionLinks, 100));
        });
    
        function positionLinks() {
            const container = document.querySelector('.section-padded-content-relative-container');
            const totalLinks = 6; // Number of links
            const padding = 50; // Padding from container edges in pixels
            const verticalShift = 100; // Shift down by 100px
            const verticalSpacing = 10; // Spacing between shape and plus/title in pixels
            const horizontalSpacing = 10; // Spacing between plus and title in pixels
    
            // Calculate available width within the container
            const availableWidth = container.clientWidth - 2 * padding;
            const spacing = availableWidth / (totalLinks + 1); // Even spacing between links
    
            for (let i = 1; i <= totalLinks; i++) {
                // Select each link's shape, plus, and title elements by ID
                const shape = document.getElementById(`section-1-over-the-edge__link-${i}-shape`);
                const plus = document.getElementById(`section-1-over-the-edge__link-${i}-plus`);
                const title = document.getElementById(`section-1-over-the-edge__link-${i}-title`);
    
                if (shape && plus && title) {
                    // Calculate the center X position for each link
                    const centerX = padding + spacing * i;
    
                    // Get shape's dimensions
                    const shapeWidth = shape.offsetWidth;
                    const shapeHeight = shape.offsetHeight;
    
                    // Get shape's initial top position from CSS and apply vertical shift
                    const shapeInitialTop = parseFloat(getComputedStyle(shape).top) || 0;
                    const shapeNewTop = shapeInitialTop + verticalShift;
    
                    // Calculate shape's left position to center it at centerX
                    const shapeLeft = centerX - (shapeWidth / 2);
    
                    // Set shape's new left and top positions
                    shape.style.left = `${shapeLeft}px`;
                    shape.style.top = `${shapeNewTop}px`;
    
                    // Get plus and title dimensions
                    const plusWidth = plus.offsetWidth;
                    const titleWidth = title.offsetWidth;
    
                    // Calculate combined width of plus and title
                    const combinedWidth = plusWidth + horizontalSpacing + titleWidth;
    
                    // Compute combined left to center plus and title beneath the shape
                    const combinedLeft = centerX - (combinedWidth / 2);
    
                    // Calculate top position for plus and title
                    const plusTop = shapeNewTop + shapeHeight + verticalSpacing;
                    const titleTop = plusTop; // Same top as plus
    
                    // Set plus's left and top positions
                    plus.style.left = `${combinedLeft}px`;
                    plus.style.top = `${plusTop}px`;
    
                    // Set title's left and top positions
                    title.style.left = `${combinedLeft + plusWidth + horizontalSpacing}px`;
                    title.style.top = `${titleTop}px`;
    
                    // Optional: Add event listeners for keyboard accessibility
                    plus.addEventListener('keypress', function(event) {
                        if (event.key === 'Enter' || event.key === ' ') {
                            section1OverTheEdgeSelectLink(i);
                        }
                    });
                }
            }
    
            // Position the Back Button
            positionBackButton(container);
        }
    
        function positionBackButton(container) {
            const backBtn = document.getElementById('section-1-over-the-edge__back-btn');
            if (backBtn) {
                // Calculate back button's left to center it horizontally
                const containerWidth = container.clientWidth;
                const buttonWidth = backBtn.offsetWidth;
                const padding = 20; // Padding from the bottom in pixels
    
                backBtn.style.left = `calc(50% - ${buttonWidth / 2}px)`;
                backBtn.style.top = `calc(100% - ${padding + backBtn.offsetHeight}px)`;
            }
        }
    
        // Function to handle link selection
        function section1OverTheEdgeSelectLink(id) {
            const totalLinks = 6; // Number of links
    
            for (let i = 1; i <= totalLinks; i++) {
                const shape = document.getElementById(`section-1-over-the-edge__link-${i}-shape`);
                const plus = document.getElementById(`section-1-over-the-edge__link-${i}-plus`);
                const title = document.getElementById(`section-1-over-the-edge__link-${i}-title`);
                const description = document.getElementById(`section-1-over-the-edge__link-${i}-description`);
    
                if (i === id) {
                    // Apply selected styles
                    applySelectedStyles(shape, plus, title, description);
                } else {
                    // Apply moving/reset styles
                    applyMovingStyles(shape, plus, title, description);
                }
            }
    
            // Optional: Adjust main title and back button if needed
            const mainTitle = document.getElementById('section-1-over-the-edge__main-title');
            const backBtn = document.getElementById('section-1-over-the-edge__back-btn');
    
            if (mainTitle) {
                mainTitle.style.position = 'absolute';
                mainTitle.style.top = '410px';
                mainTitle.style.left = '0';
                mainTitle.style.fontSize = '2rem';
                mainTitle.style.transition = 'top 0.5s, font-size 0.5s, left 0.5s';
            }
    
            if (backBtn) {
                backBtn.style.left = '0';
            }
        }
    
        // Function to handle link unselection
        function section1OverTheEdgeUnselect() {
            const totalLinks = 6; // Number of links
    
            for (let i = 1; i <= totalLinks; i++) {
                const shape = document.getElementById(`section-1-over-the-edge__link-${i}-shape`);
                const plus = document.getElementById(`section-1-over-the-edge__link-${i}-plus`);
                const title = document.getElementById(`section-1-over-the-edge__link-${i}-title`);
                const description = document.getElementById(`section-1-over-the-edge__link-${i}-description`);
    
                if (shape && plus && title && description) {
                    // Restore initial styles
                    restoreInitialStyles(shape, plus, title, description);
                }
            }
    
            // Optional: Restore main title and back button if needed
            const mainTitle = document.getElementById('section-1-over-the-edge__main-title');
            const backBtn = document.getElementById('section-1-over-the-edge__back-btn');
    
            if (mainTitle) {
                mainTitle.style.position = 'absolute';
                mainTitle.style.top = '0';
                mainTitle.style.left = '200px';
                mainTitle.style.fontSize = 'initial'; // Restore original font size
                mainTitle.style.transition = 'top 0.5s, font-size 0.5s, left 0.5s';
            }
    
            if (backBtn) {
                const container = document.querySelector('.section-padded-content-relative-container');
                positionBackButton(container);
            }
        }
    
        // Function to apply selected styles to a link
        function applySelectedStyles(shape, plus, title, description) {
            if (shape) {
                shape.style.height = '200px';
                shape.style.width = '218px';
                shape.style.top = '170px';
                shape.style.left = '0';
                shape.style.backgroundPosition = 'center';
                shape.style.transform = 'rotate(180deg)';
            }
    
            if (plus) {
                plus.style.visibility = 'hidden';
                plus.style.width = '0';
                plus.style.height = '0';
            }
    
            if (title) {
                title.style.width = '600px';
                title.style.top = '170px';
                title.style.left = '470px'; // Adjust based on your layout
                title.style.fontSize = '4rem';
                title.style.lineHeight = '4rem';
                title.style.fontWeight = '700';
            }
    
            if (description) {
                description.style.top = '310px'; // Adjust based on your layout
                description.style.left = '470px'; // Adjust based on your layout
                description.style.visibility = 'visible';
                description.style.opacity = '1';
            }
        }
    
        // Function to apply moving/reset styles to non-selected links
        function applyMovingStyles(shape, plus, title, description) {
            if (shape) {
                shape.style.width = '100px';
                shape.style.height = '60px';
                shape.style.top = `calc(100% - 100px)`; // Adjust as needed
                shape.style.left = 'calc(100% - 340px)'; // Adjust as needed
                shape.style.transform = 'rotate(360deg)';
            }
    
            if (plus) {
                plus.style.visibility = 'visible';
                plus.style.opacity = '1';
                plus.style.width = '16px';
                plus.style.height = '60px';
                plus.style.top = `calc(100% - 100px + 10px)`; // Adjust as needed
                plus.style.left = 'calc(100% - 230px)'; // Adjust as needed
            }
    
            if (title) {
                title.style.width = '100px';
                title.style.top = `calc(100% - 100px + 10px)`; // Adjust as needed
                title.style.left = 'calc(100% - 200px)'; // Adjust as needed
                title.style.fontSize = '1.4rem';
                title.style.lineHeight = '60px';
            }
    
            if (description) {
                description.style.top = '2000px'; // Hide description
                description.style.left = '470px'; // Adjust based on your layout
                description.style.visibility = 'hidden';
                description.style.opacity = '0';
            }
        }
    
        // Function to restore initial styles to all elements
        function restoreInitialStyles(shape, plus, title, description) {
            if (shape) {
                // Reset to original dimensions and positions
                shape.style.height = '60px';
                shape.style.width = '100px';
                // Assuming initial top is shapeNewTop - verticalShift
                shape.style.top = `${parseFloat(getComputedStyle(shape).top) - 100}px`;
                // Recalculate left based on current position
                // This might require additional logic based on your layout
                // For simplicity, we'll leave it as is
                shape.style.backgroundPosition = 'center';
                shape.style.transform = 'rotate(0deg)';
            }
    
            if (plus) {
                plus.style.visibility = 'visible';
                plus.style.opacity = '1';
                plus.style.width = '16px';
                plus.style.height = '60px';
            }
    
            if (title) {
                title.style.width = '200px';
                // Assuming initial top is shapeNewTop + shapeHeight + verticalSpacing - verticalShift
                title.style.top = `${parseFloat(getComputedStyle(title).top) - 100}px`;
                // Recalculate left based on current position
                // For simplicity, we'll leave it as is
                title.style.fontSize = '1.4rem';
                title.style.lineHeight = '24px';
                title.style.fontWeight = 'normal';
            }
    
            if (description) {
                description.style.top = '2000px'; // Hide description
                description.style.left = '460px'; // Adjust based on your layout
                description.style.visibility = 'hidden';
                description.style.opacity = '0';
            }
    
            // Restore main title and back button if needed
            const mainTitle = document.getElementById('section-1-over-the-edge__main-title');
            const backBtn = document.getElementById('section-1-over-the-edge__back-btn');
    
            if (mainTitle) {
                mainTitle.style.position = 'absolute';
                mainTitle.style.top = '0px';
                mainTitle.style.left = '200px';
                mainTitle.style.fontSize = 'initial'; // Restore original font size
                mainTitle.style.transition = 'top 0.5s, font-size 0.5s, left 0.5s';
            }
    
            if (backBtn) {
                positionBackButton(container);
            }
        }
    
        // Debounce function to limit the rate of function calls
        function debounce(func, wait = 100) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }
    </script>    
</body>

</html>