<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="global.css">
    <title>Infinite Marquee Effect with Stop Animation</title>
</head>
<body class="intro">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }

        .intro-fixed-background {
            position: fixed;
            background: #F7F7F7;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            overflow: hidden;
        }

        .rail-container {
            width: 100%;
            overflow: hidden;
            display: flex;
            align-items: center;
            margin-bottom: 1rem; /* Gap between each rail container */
            position: relative;
        }

        /* Marquee wrapper should occupy full height of its container */
        .marquee-wrapper {
            display: flex;
            height: 100%; /* Occupy full height of the container */
            align-items: center;
        }

        /* Rail should occupy full height of its parent container */
        .rail {
            display: flex;
            align-items: center;
            width: max-content; /* Width is determined by content */
            height: 100%; /* Full height */
            animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1); /* Smooth acceleration and deceleration */
            animation-iteration-count: 1; /* One iteration for stop effect */
            transform: translateX(0); /* Default start position */
        }

        /* Keyframes for spinning effect with smooth start and stop */
        @keyframes spinLeft {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); } /* End at half of its length */
        }

        @keyframes spinRight {
            0% { transform: translateX(-50%); }
            100% { transform: translateX(0%); } /* End at origin */
        }

        .move-left {
            animation-name: spinLeft;
            animation-duration: 3s; /* Shorter duration for visible effect */
        }

        .move-right {
            animation-name: spinRight;
            animation-duration: 3s; /* Shorter duration for visible effect */
        }

        .rail img {
            width: auto; /* Maintain aspect ratio */
            height: 90%; /* Images should occupy most of the rail height */
            margin: 0 5px;
        }

        /* Marquee wrapper for seamless duplication */
        .marquee-wrapper {
            display: flex;
        }

        /* Style to highlight the centered image after the spin */
        .highlight-center {
            border: 2px solid red; /* Example: Highlight for visual confirmation */
        }
    </style>

    <div id="intro-fixed-background" class="intro-fixed-background">
        <!-- Each rail container will hold a marquee wrapper for continuous effect -->
        <div class="rail-container">
            <div class="marquee-wrapper">
                <div class="rail rail-1 move-left"></div>
                <div class="rail rail-1 move-left"></div>
                <div class="rail rail-1 move-left"></div>
                <div class="rail rail-1 move-left"></div>
            </div>
        </div>
        <div class="rail-container">
            <div class="marquee-wrapper">
                <div class="rail rail-2 move-right"></div>
                <div class="rail rail-2 move-right"></div>
                <div class="rail rail-2 move-right"></div>
                <div class="rail rail-2 move-right"></div>
            </div>
        </div>
        <div class="rail-container">
            <div class="marquee-wrapper">
                <div class="rail rail-3 move-left"></div>
                <div class="rail rail-3 move-left"></div>
                <div class="rail rail-3 move-left"></div>
                <div class="rail rail-3 move-left"></div>
            </div>
        </div>
        <div class="rail-container">
            <div class="marquee-wrapper">
                <div class="rail rail-4 move-right"></div>
                <div class="rail rail-4 move-right"></div>
                <div class="rail rail-4 move-right"></div>
                <div class="rail rail-4 move-right"></div>
            </div>
        </div>
    </div>

    <script>
        // Function to calculate the height of each rail based on total height and gaps
        function calculateAndSetRailHeight() {
            const viewportHeight = window.innerHeight;
            const gap = 16; // 1rem gap in pixels (16px by default)
            const railHeight = (viewportHeight - (3 * gap)) / 4; // 3 gaps between 4 rails

            // Select all rail containers and set their heights dynamically
            const railContainers = document.querySelectorAll('.rail-container');
            railContainers.forEach(container => {
                container.style.height = `${railHeight}px`; // Set rail container height
            });
        }

        // Function to populate rails with images
        function populateRails() {
            const rails = document.querySelectorAll('.rail');
            rails.forEach(rail => {
                for (let i = 0; i < 30; i++) {
                    // if it s odd (1,3) otherwise for even (2,4)
                    // off img.src = './assets/odd-1.svg';
                    const img = document.createElement('img');
                    img.src = './assets/shape.svg';
                    img.alt = 'Shape';
                    rail.appendChild(img);
                }
            });
        }

        // Set rail heights, populate with images, and stop the second rail at the center
        window.onload = function() {
            calculateAndSetRailHeight(); // Set rail heights based on viewport size
            populateRails(); // Populate rails with images
        };
    </script>
</body>
</html>
