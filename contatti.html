<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contatti</title>
    <link rel="stylesheet" href="./assets/css/font.css">
    <link rel="stylesheet" href="./assets/css/global.css">
    <link rel="stylesheet" href="./assets/css/header.css">
    <style>
        .section-1-contacts__row-container {
            position: relative;
            height: 100%;
            display: flex;
            gap: 4rem;
        }

        .section-1-contacts__column-left-container {
            box-sizing: border-box;
            padding-top: 100px;
            border: 4px dashed rgba(64, 0, 255, 0.254);
            height: 100%;
            width: 100%;
        }

        .section-1-contacts__column-left-content {
            height: 100%;
            width: 100%;
            background: rgba(255, 0, 89, 0.254);
        }

        .section-1-contacts-operation-office-container {}

        .section-1-contacts-operation-office-text {}

        .section-1-contacts-operation-office-list-container {}

        .section-1-contacts__column-right-container {
            box-sizing: border-box;
            border: 4px dashed rgba(255, 0, 89, 0.254);
            height: 100%;
            width: 100%;
            padding: 20px;
        }

        .section-1-contacts__map-container {
            box-sizing: border-box;
            border: 2px dashed rgba(98, 0, 255, 0.468);
            background: url('./assets/svgs/italia-arancione.svg') no-repeat center center;
            background-size: contain;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .map-pin {
            position: absolute;
            height: 16px;
            width: 16px;
            background: url('./assets/svgs/plus-button-fff.svg') no-repeat center center;
            background-size: contain;
            cursor: pointer;
            /* Indicate clickable pins */
            transition: transform 0.3s ease;
            /* Smooth scaling on hover */
        }

        .map-pin:hover {
            transform: scale(1.2);
            /* Optional: enlarge on hover for better UX */
        }

        /* Active Pin Styling */
        .map-pin::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('./assets/svgs/plus-button-e846a0.svg') no-repeat center center;
            background-size: contain;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .map-pin.active::after {
            opacity: 1;
        }

        #map-pointer {
            position: absolute;
            left: 1200px;
            /* Initial position far left */
            top: 0px;
            /* Initial position */
            width: 100px;
            /* Initial width */
            height: 62px;
            /* 62% of width */
            background: url('./assets/svgs/shape-2-pink.svg') no-repeat center center;
            background-size: contain;
            transform-origin: center;
            transform: translate(-50%, -50%) rotate(-90deg) scale(1);
            /* Initial transform */
            transition: transform 0.5s ease, top 0.5s ease, left 0.5s ease;
            z-index: 10;
            /* Ensure the pointer is above the pins */
        }
    </style>
</head>

<body class="page-id-46">

    <div class="outer-app-container">

        <!-- HEADER -->
        <div id="edge-header" class="edge-header">
            <div id="header-logo-container" class="header-logo-container">
                <img class="header-logo-img" src="./assets/svgs/logo.svg" alt="Edge"
                    onClick="window.location = './front-page.html';" style="cursor: pointer;" />
                <h1 class="header-logo-edge">edge</h1>
            </div>
            <div class="header-navigation-links-container">
                <div class="header-navigation-links">
                    <a class="header-navigation-link" href="/a-proposito-di-noi.html">A proposito di noi</a>
                    <a class="header-navigation-link" href="/cosa-facciamo.html">Cosa facciamo</a>
                    <a class="header-navigation-link" href="/over-the-edge.html">Over the Edge</a>
                    <a class="header-navigation-link" href="/il-gruppo.html">Il gruppo</a>
                    <a class="header-navigation-link" href="/contatti.html">Contatti</a>
                    <a class="header-navigation-link" href="#">it <span style="font-family: arial;">|</span> en</a>
                </div>
            </div>
        </div>

        <div class="inner-app-container">

            <div class="section-padded-content section-1-contacts">
                <div class="section-1-contacts__row-container">
                    <div class="section-1-contacts__column-left-container">
                        <div class="section-1-contacts__column-left-content">
                            <div class="section-1-contacts-legal-office-container"></div>
                            <div class="section-1-contacts-operation-office-container"></div>
                        </div>
                    </div>

                    <div class="section-1-contacts__column-right-container">
                        <div class="section-1-contacts__map-container" id="map-container">
                            <div id="map-pointer"></div>
                            <div class="map-pin" id="map-pin-milan" title="Milan" tabindex="0" role="button"
                                aria-label="Milan"></div>
                            <div class="map-pin" id="map-pin-tourin" title="Tourin" tabindex="0" role="button"
                                aria-label="Tourin"></div>
                            <div class="map-pin" id="map-pin-casale" title="Casale Monferrato" tabindex="0"
                                role="button" aria-label="Casale Monferrato"></div>
                            <div class="map-pin" id="map-pin-mantova" title="Mantova" tabindex="0" role="button"
                                aria-label="Mantova"></div>
                            <div class="map-pin" id="map-pin-verona" title="Verona" tabindex="0" role="button"
                                aria-label="Verona"></div>
                            <div class="map-pin" id="map-pin-ferrara" title="Ferrara" tabindex="0" role="button"
                                aria-label="Ferrara"></div>
                            <div class="map-pin" id="map-pin-padova" title="Padova" tabindex="0" role="button"
                                aria-label="Padova"></div>
                            <div class="map-pin" id="map-pin-calabria" title="Calabria" tabindex="0" role="button"
                                aria-label="Calabria"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-padded-content section-2-contacts">
                <h1 style="padding: 200px">Lavora con noi</h1>
            </div>

            <div class="section-padded-content">
                <h1 style="padding: 200px">Informazioni</h1>
            </div>

        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mapContainer = document.querySelector('.section-1-contacts__map-container');
            const mapPointer = document.getElementById('map-pointer');

            const originalMapSize = { width: 415, height: 543 }; // Original dimensions of the map image
            const pointerAspectRatio = 0.62; // Height is 62% of the width

            const pinsData = [
                {
                    id: 'map-pin-milan',
                    originalX: 87,
                    originalY: 95,
                    pointerOffset: 30, // Distance outward from the pin
                    pointerRotation: 180 // Points to the left
                },
                {
                    id: 'map-pin-tourin',
                    originalX: 47,
                    originalY: 95,
                    pointerOffset: 40,
                    pointerRotation: 135 // Points towards bottom-right
                },
                {
                    id: 'map-pin-casale',
                    originalX: 70,
                    originalY: 118,
                    pointerOffset: 50,
                    pointerRotation: 45 // Points towards top-right
                },
                {
                    id: 'map-pin-mantova',
                    originalX: 135,
                    originalY: 120,
                    pointerOffset: 40,
                    pointerRotation: 225 // Points towards bottom-left
                },
                {
                    id: 'map-pin-verona',
                    originalX: 135,
                    originalY: 80,
                    pointerOffset: 30,
                    pointerRotation: 135 // Points towards bottom-right
                },
                {
                    id: 'map-pin-ferrara',
                    originalX: 165,
                    originalY: 140,
                    pointerOffset: 60,
                    pointerRotation: 90 // Points up
                },
                {
                    id: 'map-pin-padova',
                    originalX: 165,
                    originalY: 100,
                    pointerOffset: 50,
                    pointerRotation: 0 // Points to the right
                },
                {
                    id: 'map-pin-calabria',
                    originalX: 340,
                    originalY: 440,
                    pointerOffset: 40,
                    pointerRotation: 270 // Points up
                }
                // Add more pins as needed
            ];

            let activePinId = null; // Track the currently active pin

            function positionPins() {
                const containerWidth = mapContainer.clientWidth;
                const containerHeight = mapContainer.clientHeight;
                const containerRatio = containerWidth / containerHeight;
                const originalRatio = originalMapSize.width / originalMapSize.height;

                let displayedMapWidth, displayedMapHeight;

                if (containerRatio > originalRatio) {
                    // Container is wider relative to the map's aspect ratio
                    displayedMapHeight = containerHeight;
                    displayedMapWidth = displayedMapHeight * originalRatio;
                } else {
                    // Container is taller relative to the map's aspect ratio
                    displayedMapWidth = containerWidth;
                    displayedMapHeight = displayedMapWidth / originalRatio;
                }

                const offsetX = (containerWidth - displayedMapWidth) / 2;
                const offsetY = (containerHeight - displayedMapHeight) / 2;

                pinsData.forEach(pin => {
                    const pinElement = document.getElementById(pin.id);
                    const scaledX = offsetX + (pin.originalX / originalMapSize.width) * displayedMapWidth;
                    const scaledY = offsetY + (pin.originalY / originalMapSize.height) * displayedMapHeight;

                    pinElement.style.left = `${scaledX}px`;
                    pinElement.style.top = `${scaledY}px`;
                });
            }

            function movePointerToPin(pin) {
                const pinElement = document.getElementById(pin.id);
                const pinRect = pinElement.getBoundingClientRect();
                const containerRect = mapContainer.getBoundingClientRect();

                // Calculate the center of the pin relative to the map container
                const pinCenterX = pinRect.left - containerRect.left + pinRect.width / 2;
                const pinCenterY = pinRect.top - containerRect.top + pinRect.height / 2;

                // Calculate pointer dimensions
                const pointerWidth = 100; // Adjust as needed
                const pointerHeight = pointerWidth * pointerAspectRatio;

                // Calculate pointer position offset based on rotation
                const angleRad = (pin.pointerRotation * Math.PI) / 180;
                const offsetX = Math.cos(angleRad) * pin.pointerOffset;
                const offsetY = Math.sin(angleRad) * pin.pointerOffset;

                // Apply pointer dimensions
                mapPointer.style.width = `${pointerWidth}px`;
                mapPointer.style.height = `${pointerHeight}px`;

                // Position the pointer
                mapPointer.style.left = `${pinCenterX + offsetX}px`;
                mapPointer.style.top = `${pinCenterY + offsetY}px`;

                // Apply rotation and scaling directly from configuration
                mapPointer.style.transform = `translate(-50%, -50%) rotate(${pin.pointerRotation + 180}deg) scale(.5)`;

                // Manage active pin state
                if (activePinId && activePinId !== pin.id) {
                    const previousActivePin = document.getElementById(activePinId);
                    previousActivePin.classList.remove('active');
                }
                pinElement.classList.add('active');
                activePinId = pin.id;
            }

            // Attach event listeners to pins
            pinsData.forEach(pin => {
                const pinElement = document.getElementById(pin.id);
                pinElement.addEventListener('click', () => movePointerToPin(pin));

                // Make pins accessible via keyboard
                pinElement.setAttribute('tabindex', '0');
                pinElement.setAttribute('role', 'button');
                pinElement.setAttribute('aria-label', pin.title || 'Map Pin');

                pinElement.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        movePointerToPin(pin);
                    }
                });
            });

            // Initial positioning of pins
            positionPins();

            // Adjust pin positions on window resize
            window.addEventListener('resize', () => {
                positionPins();
                // Optional: Reposition the pointer if needed
                if (activePinId) {
                    const activePin = pinsData.find(pin => pin.id === activePinId);
                    if (activePin) {
                        movePointerToPin(activePin);
                    }
                }
            });

            // Set initial position for pointer off-screen
            mapPointer.style.left = '1200px';
            mapPointer.style.top = '0px';
            mapPointer.style.transform = `translate(-50%, -50%) rotate(-90deg) scale(1)`;
        });
    </script>

</body>

</html>
