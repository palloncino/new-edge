<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/font.css">
    <link rel="stylesheet" href="./assets/css/global.css">
    <link rel="stylesheet" href="./assets/css/header.css">
    <title>Contatti</title>
    <style>
        .section-1-contacts__row-container {
            position: relative;
            height: 100%;
            display: flex;
            gap: 4rem;
        }

        .section-1-contacts__column-left-container {
            box-sizing: border-box;
            padding-top: 100px;
            border: 4px dashed rgba(64, 0, 255, 0.254);
            height: 100%;
            width: 100%;
        }

        .section-1-contacts__column-left-content {
            height: 100%;
            width: 100%;
            background: rgba(255, 0, 89, 0.254);
        }

        .section-1-contacts__column-right-container {
            box-sizing: border-box;
            border: 4px dashed rgba(255, 0, 89, 0.254);
            height: 100%;
            width: 100%;
            padding: 20px;
        }

        .section-1-contacts__map-container {
            box-sizing: border-box;
            border: 2px dashed rgba(98, 0, 255, 0.468);
            background: url('./assets/svgs/italia-arancione.svg') no-repeat center center;
            background-size: contain;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .map-pin {
            position: absolute;
            height: 16px;
            width: 16px;
            background: url('./assets/svgs/plus-button-fff.svg') no-repeat center center;
            background-size: contain;
            cursor: pointer;
        }

        #map-pointer {
            position: absolute;
            left: 1000px;
            width: 100px;
            height: 100px;
            background: url('./assets/svgs/shape-2-pink.svg') no-repeat center center;
            background-size: contain;
            transform-origin: center;
            transition: transform 0.5s ease, top 0.5s ease, left 0.5s ease;
        }
    </style>
</head>

<body class="page-id-46">

    <div class="outer-app-container">

        <!-- HEADER -->
        <div id="edge-header" class="edge-header">
            <div id="header-logo-container" class="header-logo-container">
                <img class="header-logo-img" src="./assets/svgs/logo.svg" alt="Edge"
                    onClick="window.location = './front-page.html';" style="cursor: pointer;" />
                <h1 class="header-logo-edge">edge</h1>
            </div>
            <div class="header-navigation-links-container">
                <div class="header-navigation-links">
                    <a class="header-navigation-link" href="/a-proposito-di-noi.html">A proposito di noi</a>
                    <a class="header-navigation-link" href="/cosa-facciamo.html">Cosa facciamo</a>
                    <a class="header-navigation-link" href="/over-the-edge.html">Over the Edge</a>
                    <a class="header-navigation-link" href="/il-gruppo.html">Il gruppo</a>
                    <a class="header-navigation-link" href="/contatti.html">Contatti</a>
                    <a class="header-navigation-link" href="#">it <span style="font-family: arial;">|</span> en</a>
                </div>
            </div>
        </div>

        <div class="inner-app-container">

            <div class="section-padded-content section-1-contacts">
                <div class="section-1-contacts__row-container">
                    <div class="section-1-contacts__column-left-container">
                        <div class="section-1-contacts__column-left-content">
                            <div class="section-1-contacts-legal-office-container"></div>
                            <div class="section-1-contacts-operation-office-container"></div>
                        </div>
                    </div>

                    <div class="section-1-contacts__column-right-container">
                        <div class="section-1-contacts__map-container" id="map-container">
                            <div id="map-pointer"></div>
                            <div class="map-pin" id="map-pin-milan"></div>
                            <div class="map-pin" id="map-pin-calabria"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-padded-content section-2-contacts">
                <h1 style="padding: 200px">Lavora con noi</h1>
            </div>

            <div class="section-padded-content">
                <h1 style="padding: 200px">Informazioni</h1>
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mapContainer = document.querySelector('.section-1-contacts__map-container');
            const mapPointer = document.getElementById('map-pointer');

            const originalMapSize = { width: 415, height: 543 };
            const pointerAspectRatio = 0.62;

            const pinsData = [
                {
                    id: 'map-pin-milan',
                    originalX: 87,
                    originalY: 108,
                    pointerOffset: 50, // Offset from the pin
                    pointerRotation: -45 // Rotation in degrees
                },
                {
                    id: 'map-pin-calabria',
                    originalX: 312,
                    originalY: 440,
                    pointerOffset: 60,
                    pointerRotation: 90
                }
            ];

            function createDebugMarker(x, y) {
                const marker = document.createElement('div');
                marker.style.position = 'absolute';
                marker.style.width = '10px';
                marker.style.height = '10px';
                marker.style.backgroundColor = 'red';
                marker.style.borderRadius = '50%';
                marker.style.left = `${x}px`;
                marker.style.top = `${y}px`;
                marker.style.transform = 'translate(-50%, -50%)';
                marker.style.zIndex = 15; // Ensure it appears above other elements
                mapContainer.appendChild(marker);
            }

            function positionPins() {
                const containerWidth = mapContainer.clientWidth;
                const containerHeight = mapContainer.clientHeight;
                const originalRatio = originalMapSize.width / originalMapSize.height;

                let displayedMapWidth, displayedMapHeight;
                if (containerWidth / containerHeight > originalRatio) {
                    displayedMapHeight = containerHeight;
                    displayedMapWidth = displayedMapHeight * originalRatio;
                } else {
                    displayedMapWidth = containerWidth;
                    displayedMapHeight = displayedMapWidth / originalRatio;
                }

                const offsetX = (containerWidth - displayedMapWidth) / 2;
                const offsetY = (containerHeight - displayedMapHeight) / 2;

                pinsData.forEach(pin => {
                    const pinElement = document.getElementById(pin.id);
                    const scaledX = offsetX + (pin.originalX / originalMapSize.width) * displayedMapWidth;
                    const scaledY = offsetY + (pin.originalY / originalMapSize.height) * displayedMapHeight;

                    pinElement.style.left = `${scaledX}px`;
                    pinElement.style.top = `${scaledY}px`;

                    // Create a debug marker at the center of the pin
                    createDebugMarker(scaledX, scaledY);
                });
            }

            function movePointerToPin(pin) {
                const pinElement = document.getElementById(pin.id);
                const pinRect = pinElement.getBoundingClientRect();
                const containerRect = mapContainer.getBoundingClientRect();

                const pinCenterX = pinRect.left - containerRect.left + pinRect.width / 2;
                const pinCenterY = pinRect.top - containerRect.top + pinRect.height / 2;

                const angleRad = (pin.pointerRotation * Math.PI) / 180;
                const offsetX = Math.cos(angleRad) * pin.pointerOffset;
                const offsetY = Math.sin(angleRad) * pin.pointerOffset;

                mapPointer.style.width = `100px`;
                mapPointer.style.height = `${100 * pointerAspectRatio}px`;
                mapPointer.style.left = `${pinCenterX + offsetX}px`;
                mapPointer.style.top = `${pinCenterY + offsetY}px`;
                mapPointer.style.transform = `translate(-50%, -50%) rotate(${pin.pointerRotation}deg) scale(0.8)`;

                // Create a debug marker for pointer's target position
                createDebugMarker(pinCenterX + offsetX, pinCenterY + offsetY);
            }

            pinsData.forEach(pin => {
                const pinElement = document.getElementById(pin.id);
                pinElement.addEventListener('click', () => movePointerToPin(pin));
            });

            positionPins();

            window.addEventListener('resize', () => {
                mapContainer.querySelectorAll('div').forEach(marker => marker.remove()); // Clear debug markers
                positionPins();
            });
        });
    </script>


</body>

</html>